<div class="dashboard-container">
  <div class="stats-grid">
    <mat-card class="stat-card">
      <mat-card-content>
        <div class="stat-content">
          <div class="stat-icon">
            <mat-icon>restaurant_menu</mat-icon>
          </div>
          <div class="stat-info">
            <h3>{{ totalAbertas$ | async }}</h3>
            <p>Comandas Abertas</p>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="stat-card">
      <mat-card-content>
        <div class="stat-content">
          <div class="stat-icon completed">
            <mat-icon>check_circle</mat-icon>
          </div>
          <div class="stat-info">
            <h3>{{ totalEncerradas$ | async }}</h3>
            <p>Comandas Finalizadas</p>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="stat-card">
      <mat-card-content>
        <div class="stat-content">
          <div class="stat-icon revenue">
            <mat-icon>attach_money</mat-icon>
          </div>
          <div class="stat-info">
            <h3>{{ formatarPreco((totalReceita$ | async) || 0) }}</h3>
            <p>Receita Total</p>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
  </div>

  <div class="tables-grid">
    <mat-card class="table-card">
      <mat-card-header>
        <mat-card-title>
          <mat-icon>schedule</mat-icon>
          Comandas em Andamento
        </mat-card-title>
      </mat-card-header>
      <mat-card-content>
        @if (comandasAbertas$ | async; as comandasAbertas) {
          @if (comandasAbertas.length === 0) {
            <div class="empty-state">
              <mat-icon>info</mat-icon>
              <p>Nenhuma comanda em andamento</p>
            </div>
          } @else {
            <div class="comandas-list">
              @for (comanda of comandasAbertas; track comanda.id) {
                <div class="comanda-item">
                  <div class="comanda-info">
                    <h4>{{ comanda.nomeCliente }}</h4>
                    <p>{{ formatarData(comanda.dataCriacao) }}</p>
                  </div>
                  <div class="comanda-total">
                    <span class="total">{{ formatarPreco(comanda.valorTotal) }}</span>
                  </div>
                </div>
              }
            </div>
          }
        }
      </mat-card-content>
      <mat-card-actions>
        <button mat-stroked-button (click)="navigateTo('/admin/comandas')">
          <mat-icon>visibility</mat-icon>
          Ver Todas
        </button>
      </mat-card-actions>
    </mat-card>

    <mat-card class="table-card">
      <mat-card-header>
        <mat-card-title>
          <mat-icon>history</mat-icon>
          Últimas Finalizadas
        </mat-card-title>
      </mat-card-header>
      <mat-card-content>
        @if (comandasEncerradas$ | async; as comandasEncerradas) {
          @if (comandasEncerradas.length === 0) {
            <div class="empty-state">
              <mat-icon>info</mat-icon>
              <p>Nenhuma comanda finalizada</p>
            </div>
          } @else {
            <div class="comandas-list">
              @for (comanda of comandasEncerradas.slice(-5); track comanda.id) {
                <div class="comanda-item">
                  <div class="comanda-info">
                    <h4>{{ comanda.nomeCliente }}</h4>
                    <p>{{ formatarData(comanda.dataEncerramento || comanda.dataCriacao) }}</p>
                  </div>
                  <div class="comanda-total">
                    <span class="total completed">{{ formatarPreco(comanda.valorTotal) }}</span>
                  </div>
                </div>
              }
            </div>
          }
        }
      </mat-card-content>
      <mat-card-actions>
        <button mat-stroked-button (click)="navigateTo('/admin/comandas')">
          <mat-icon>visibility</mat-icon>
          Ver Histórico
        </button>
      </mat-card-actions>
    </mat-card>
  </div>
</div>
